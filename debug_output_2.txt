Starting import...
Import failed: SQLSTATE[23503]: Foreign key violation: 7 ERROR:  insert or update on table "waybills" violates foreign key constraint "waybills_upload_id_foreign"
DETAIL:  Key (upload_id)=(1) is not present in table "uploads". (Connection: pgsql, SQL: insert into "waybills" ("batch_ready", "cod_amount", "created_at", "destination", "quantity", "receiver_address", "receiver_name", "receiver_phone", "remarks", "sender_address", "sender_name", "sender_phone", "service_type", "status", "updated_at", "upload_id", "waybill_number", "weight") values (0, 199, 2025-12-08 04:30:17, TUBA, 1, CAMP 3, TUBA, BENGUET, Asas Modi, 9107013842, R-STEM COFFEE 1 SET B1T2, PUROK 4 MC ARTHUR HWAY/SANTA RITA BULACAN, STEM CAFE, +639550811114, EZ, pending, 2025-12-08 04:30:17, 1, JT0009546408968, 0.1) on conflict ("waybill_number") do update set "upload_id" = "excluded"."upload_id", "waybill_number" = "excluded"."waybill_number", "sender_name" = "excluded"."sender_name", "sender_address" = "excluded"."sender_address", "sender_phone" = "excluded"."sender_phone", "receiver_name" = "excluded"."receiver_name", "receiver_address" = "excluded"."receiver_address", "receiver_phone" = "excluded"."receiver_phone", "destination" = "excluded"."destination", "weight" = "excluded"."weight", "quantity" = "excluded"."quantity", "service_type" = "excluded"."service_type", "cod_amount" = "excluded"."cod_amount", "remarks" = "excluded"."remarks", "status" = "excluded"."status", "batch_ready" = "excluded"."batch_ready", "updated_at" = "excluded"."updated_at")
File: /home/it-admin/Documents/v4/v4/laravel/vendor/laravel/framework/src/Illuminate/Database/Connection.php:826
Trace:
#0 /home/it-admin/Documents/v4/v4/laravel/vendor/laravel/framework/src/Illuminate/Database/Connection.php(780): Illuminate\Database\Connection->runQueryCallback('insert into "wa...', Array, Object(Closure))
#1 /home/it-admin/Documents/v4/v4/laravel/vendor/laravel/framework/src/Illuminate/Database/Connection.php(583): Illuminate\Database\Connection->run('insert into "wa...', Array, Object(Closure))
#2 /home/it-admin/Documents/v4/v4/laravel/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php(4002): Illuminate\Database\Connection->affectingStatement('insert into "wa...', Array)
#3 /home/it-admin/Documents/v4/v4/laravel/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php(1291): Illuminate\Database\Query\Builder->upsert(Array, 'waybill_number', Array)
#4 /home/it-admin/Documents/v4/v4/laravel/vendor/laravel/framework/src/Illuminate/Support/Traits/ForwardsCalls.php(23): Illuminate\Database\Eloquent\Builder->upsert(Array, 'waybill_number', Array)
#5 /home/it-admin/Documents/v4/v4/laravel/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php(2540): Illuminate\Database\Eloquent\Model->forwardCallTo(Object(Illuminate\Database\Eloquent\Builder), 'upsert', Array)
#6 /home/it-admin/Documents/v4/v4/laravel/vendor/maatwebsite/excel/src/Imports/ModelManager.php(151): Illuminate\Database\Eloquent\Model->__call('upsert', Array)
#7 /home/it-admin/Documents/v4/v4/laravel/vendor/laravel/framework/src/Illuminate/Collections/Traits/EnumeratesValues.php(271): Maatwebsite\Excel\Imports\ModelManager->{closure:{closure:Maatwebsite\Excel\Imports\ModelManager::singleFlush():147}:148}(Object(App\Models\Waybill), 0)
#8 /home/it-admin/Documents/v4/v4/laravel/vendor/maatwebsite/excel/src/Imports/ModelManager.php(148): Illuminate\Support\Collection->each(Object(Closure))
#9 /home/it-admin/Documents/v4/v4/laravel/vendor/laravel/framework/src/Illuminate/Collections/Traits/EnumeratesValues.php(271): Maatwebsite\Excel\Imports\ModelManager->{closure:Maatwebsite\Excel\Imports\ModelManager::singleFlush():147}(Array, 2)
#10 /home/it-admin/Documents/v4/v4/laravel/vendor/maatwebsite/excel/src/Imports/ModelManager.php(147): Illuminate\Support\Collection->each(Object(Closure))
#11 /home/it-admin/Documents/v4/v4/laravel/vendor/maatwebsite/excel/src/Imports/ModelManager.php(82): Maatwebsite\Excel\Imports\ModelManager->singleFlush(Object(App\Imports\WaybillsImport))
#12 /home/it-admin/Documents/v4/v4/laravel/vendor/maatwebsite/excel/src/Imports/ModelImporter.php(114): Maatwebsite\Excel\Imports\ModelManager->flush(Object(App\Imports\WaybillsImport), false)
#13 /home/it-admin/Documents/v4/v4/laravel/vendor/maatwebsite/excel/src/Imports/ModelImporter.php(95): Maatwebsite\Excel\Imports\ModelImporter->flush(Object(App\Imports\WaybillsImport), 1, 2)
#14 /home/it-admin/Documents/v4/v4/laravel/vendor/maatwebsite/excel/src/Sheet.php(256): Maatwebsite\Excel\Imports\ModelImporter->import(Object(PhpOffice\PhpSpreadsheet\Worksheet\Worksheet), Object(App\Imports\WaybillsImport), 2)
#15 /home/it-admin/Documents/v4/v4/laravel/vendor/maatwebsite/excel/src/Reader.php(116): Maatwebsite\Excel\Sheet->import(Object(App\Imports\WaybillsImport), 2)
#16 /home/it-admin/Documents/v4/v4/laravel/vendor/laravel/framework/src/Illuminate/Database/Concerns/ManagesTransactions.php(35): Maatwebsite\Excel\Reader->{closure:Maatwebsite\Excel\Reader::read():111}(Object(Illuminate\Database\PostgresConnection))
#17 /home/it-admin/Documents/v4/v4/laravel/vendor/maatwebsite/excel/src/Transactions/DbTransactionHandler.php(30): Illuminate\Database\Connection->transaction(Object(Closure))
#18 /home/it-admin/Documents/v4/v4/laravel/vendor/maatwebsite/excel/src/Reader.php(111): Maatwebsite\Excel\Transactions\DbTransactionHandler->__invoke(Object(Closure))
#19 /home/it-admin/Documents/v4/v4/laravel/vendor/maatwebsite/excel/src/Excel.php(155): Maatwebsite\Excel\Reader->read(Object(App\Imports\WaybillsImport), '/home/it-admin/...', 'Xlsx', NULL)
#20 /home/it-admin/Documents/v4/v4/laravel/vendor/laravel/framework/src/Illuminate/Support/Facades/Facade.php(363): Maatwebsite\Excel\Excel->import(Object(App\Imports\WaybillsImport), '/home/it-admin/...')
#21 /home/it-admin/Documents/v4/v4/laravel/debug_import.php(13): Illuminate\Support\Facades\Facade::__callStatic('import', Array)
#22 {main}
