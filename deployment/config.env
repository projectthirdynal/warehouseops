#!/bin/bash
# Deployment Configuration Variables
# Edit this file with your Proxmox environment details

#######################
# VM IP Addresses
#######################
DB_VM_IP="192.168.0.36"          # Database server IP
APP1_VM_IP="192.168.0.33"        # Application server 1 IP
APP2_VM_IP="192.168.0.34"        # Application server 2 IP
LB_VM_IP="192.168.0.35"          # Load balancer IP

# Database connection (used by app servers)
DB_HOST="192.168.0.36"

#######################
# Network Configuration
#######################
NETWORK_GATEWAY="192.168.0.1"    # Network gateway
NETMASK="24"                     # Network mask (CIDR notation)
DNS_SERVERS="8.8.8.8,8.8.4.4"   # DNS servers (comma-separated)

#######################
# Proxmox Configuration
#######################
PROXMOX_NODE="pve"               # Proxmox node name
STORAGE_POOL="FO-Storage"         # Storage pool for VM disks
NETWORK_BRIDGE="vmbr0"           # Network bridge name

#######################
# VM IDs
#######################
DB_VMID="800"                    # Database VM ID
APP1_VMID="801"                  # App server 1 VM ID
APP2_VMID="802"                  # App server 2 VM ID
LB_VMID="803"                    # Load balancer VM ID

#######################
# VM Resources
#######################
# Database VM
DB_CORES="4"
DB_MEMORY="8192"                 # MB
DB_DISK="50G"

# Application Server VMs
APP_CORES="2"
APP_MEMORY="4096"                # MB
APP_DISK="30G"

# Load Balancer VM
LB_CORES="2"
LB_MEMORY="2048"                 # MB
LB_DISK="20G"

#######################
# Database Configuration
#######################
DB_NAME="warehousedb"
DB_USER="devuser"
DB_PASSWORD="Devpassword00"
POSTGRES_VERSION="16"

# Existing database to migrate from (optional)
EXISTING_DB_HOST="192.168.120.28"
MIGRATE_EXISTING_DB="false"      # Set to "true" to migrate data

#######################
# Application Configuration
#######################
APP_NAME="Waybill Scanning System"
APP_ENV="production"
APP_DEBUG="false"
APP_URL="http://${LB_VM_IP}"

# Application source
APP_SOURCE_PATH="/home/it-admin/Documents/v4/v4/laravel"

#######################
# SSH Configuration
#######################
SSH_USER="it-admin"                # Default user for cloud-init
SSH_KEY_PATH="$HOME/.ssh/id_rsa.pub"  # Your SSH public key
SSH_PASSWORD="!admin00"                      # Optional: SSH password (if key setup missing)
SSH_OPTIONS="-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null" # Avoid fingerprint prompts

#######################
# Optional: SSL/HTTPS
#######################
ENABLE_HTTPS="false"             # Set to "true" to enable HTTPS
DOMAIN_NAME=""                   # Optional: internal domain name

#######################
# Load Balancer Configuration
#######################
LB_ALGORITHM="roundrobin"        # Options: roundrobin, leastconn, source
SESSION_STICKY="true"            # Enable sticky sessions for scanner
HEALTH_CHECK_INTERVAL="3s"       # Health check interval

#######################
# Backup Configuration
#######################
BACKUP_ENABLED="true"
BACKUP_DIR="/var/backups/waybill"
BACKUP_RETENTION_DAYS="7"
