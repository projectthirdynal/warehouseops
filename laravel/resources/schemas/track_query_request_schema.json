{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Track Query Request",
    "description": "Schema for outbound POST request to query tracking status from logistics provider API",
    "type": "object",
    "required": [
        "waybill_numbers"
    ],
    "properties": {
        "waybill_numbers": {
            "type": "array",
            "description": "Array of waybill numbers to query",
            "items": {
                "type": "string"
            },
            "minItems": 1,
            "maxItems": 100,
            "example": [
                "JT1234567890",
                "JT0987654321"
            ]
        },
        "customer_code": {
            "type": "string",
            "description": "Your customer/merchant code with the logistics provider"
        },
        "api_key": {
            "type": "string",
            "description": "API authentication key (sent in header or body depending on provider)"
        },
        "include_history": {
            "type": "boolean",
            "description": "Whether to include full tracking history",
            "default": true
        }
    },
    "response_schema": {
        "type": "object",
        "properties": {
            "success": {
                "type": "boolean",
                "description": "Whether the request was successful"
            },
            "data": {
                "type": "array",
                "items": {
                    "type": "object",
                    "properties": {
                        "waybill_number": {
                            "type": "string"
                        },
                        "current_status": {
                            "type": "string"
                        },
                        "current_location": {
                            "type": "string"
                        },
                        "last_update": {
                            "type": "string",
                            "format": "date-time"
                        },
                        "estimated_delivery": {
                            "type": "string",
                            "format": "date-time"
                        },
                        "history": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "properties": {
                                    "status": {
                                        "type": "string"
                                    },
                                    "location": {
                                        "type": "string"
                                    },
                                    "timestamp": {
                                        "type": "string",
                                        "format": "date-time"
                                    },
                                    "details": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "errors": {
                "type": "array",
                "items": {
                    "type": "object",
                    "properties": {
                        "waybill_number": {
                            "type": "string"
                        },
                        "error_code": {
                            "type": "string"
                        },
                        "message": {
                            "type": "string"
                        }
                    }
                }
            }
        }
    },
    "examples": {
        "request": {
            "waybill_numbers": [
                "JT1234567890",
                "JT0987654321"
            ],
            "customer_code": "MERCHANT001",
            "include_history": true
        },
        "response": {
            "success": true,
            "data": [
                {
                    "waybill_number": "JT1234567890",
                    "current_status": "DELIVERED",
                    "current_location": "Quezon City",
                    "last_update": "2026-01-09T14:30:00+08:00",
                    "history": [
                        {
                            "status": "PICKED_UP",
                            "location": "Manila Warehouse",
                            "timestamp": "2026-01-08T09:00:00+08:00",
                            "details": "Package picked up from sender"
                        },
                        {
                            "status": "IN_TRANSIT",
                            "location": "Manila Hub",
                            "timestamp": "2026-01-08T14:00:00+08:00",
                            "details": "In transit to destination"
                        },
                        {
                            "status": "DELIVERED",
                            "location": "Quezon City",
                            "timestamp": "2026-01-09T14:30:00+08:00",
                            "details": "Delivered to consignee"
                        }
                    ]
                }
            ],
            "errors": []
        }
    }
}